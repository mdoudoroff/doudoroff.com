/*!
 *  Howler.js Audio Player Demo
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
var elms=["track","timer","duration","playBtn","pauseBtn","prevBtn","nextBtn","playlistBtn","volumeBtn","progress","bar","wave","loading","playlist","list","volume","barEmpty","barFull","sliderBtn"];elms.forEach((function(e){window[e]=document.getElementById(e)}));var Player=function(e){this.playlist=e,this.index=0,track.innerHTML="1. "+e[0].title,e.forEach((function(t){var n=document.createElement("div");n.className="list-song",n.innerHTML=t.title,n.onclick=function(){player.skipTo(e.indexOf(t))},list.appendChild(n)}))};Player.prototype={play:function(e){var t=this,n;e="number"==typeof e?e:t.index;var l=t.playlist[e];(n=l.howl?l.howl:l.howl=new Howl({src:["./audio/"+l.file+".mp3"],html5:!0,onplay:function(){duration.innerHTML=t.formatTime(Math.round(n.duration())),requestAnimationFrame(t.step.bind(t)),pauseBtn.style.display="block"},onload:function(){loading.style.display="none"},onend:function(){t.skip("next")},onpause:function(){},onstop:function(){},onseek:function(){requestAnimationFrame(t.step.bind(t))}})).play(),track.innerHTML=e+1+". "+l.title,"loaded"===n.state()?(playBtn.style.display="none",pauseBtn.style.display="block"):(loading.style.display="block",playBtn.style.display="none",pauseBtn.style.display="none"),t.index=e},pause:function(){var e=this,t;e.playlist[e.index].howl.pause(),playBtn.style.display="block",pauseBtn.style.display="none"},skip:function(e){var t=this,n=0;"prev"===e?(n=t.index-1)<0&&(n=t.playlist.length-1):(n=t.index+1)>=t.playlist.length&&(n=0),t.skipTo(n)},skipTo:function(e){var t=this;t.playlist[t.index].howl&&t.playlist[t.index].howl.stop(),progress.style.width="0%",t.play(e)},volume:function(e){var t=this;Howler.volume(e);var n=90*e/100;barFull.style.width=100*n+"%",sliderBtn.style.left=window.innerWidth*n+.05*window.innerWidth-25+"px"},seek:function(e){var t=this,n=t.playlist[t.index].howl;n&&n.playing()&&n.seek(n.duration()*e)},step:function(){var e=this,t=e.playlist[e.index].howl,n=t.seek()||0;timer.innerHTML=e.formatTime(Math.round(n)),progress.style.width=(n/t.duration()*100||0)+"%",t.playing()&&requestAnimationFrame(e.step.bind(e))},togglePlaylist:function(){var e=this,t="block"===playlist.style.display?"none":"block";setTimeout((function(){playlist.style.display=t}),"block"===t?0:500),playlist.className="block"===t?"fadein":"fadeout"},toggleVolume:function(){var e=this,t="block"===volume.style.display?"none":"block";setTimeout((function(){volume.style.display=t}),"block"===t?0:500),volume.className="block"===t?"fadein":"fadeout"},formatTime:function(e){var t=Math.floor(e/60)||0,n=e-60*t||0;return t+":"+(n<10?"0":"")+n}};var player=new Player(localPlaylist);playBtn.addEventListener("click",(function(){player.play()})),pauseBtn.addEventListener("click",(function(){player.pause()})),prevBtn.addEventListener("click",(function(){player.skip("prev")})),nextBtn.addEventListener("click",(function(){player.skip("next")})),waveform.addEventListener("click",(function(e){var t=this.getClientRects()[0];player.seek((e.clientX-t.left)/t.width)})),playlistBtn.addEventListener("click",(function(){player.togglePlaylist()})),playlist.addEventListener("click",(function(){player.togglePlaylist()})),volumeBtn.addEventListener("click",(function(){player.toggleVolume()})),volume.addEventListener("click",(function(){player.toggleVolume()})),barEmpty.addEventListener("click",(function(e){var t=e.layerX/parseFloat(barEmpty.scrollWidth);player.volume(t)})),sliderBtn.addEventListener("mousedown",(function(){window.sliderDown=!0})),sliderBtn.addEventListener("touchstart",(function(){window.sliderDown=!0})),volume.addEventListener("mouseup",(function(){window.sliderDown=!1})),volume.addEventListener("touchend",(function(){window.sliderDown=!1}));var move=function(e){if(window.sliderDown){var t,n,l=(e.clientX||e.touches[0].clientX)-.05*window.innerWidth,i=Math.min(1,Math.max(0,l/parseFloat(barEmpty.scrollWidth)));player.volume(i)}};volume.addEventListener("mousemove",move),volume.addEventListener("touchmove",move);